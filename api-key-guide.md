# üîë –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ API_KEY –¥–ª—è HSK Telegram Bot

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ API_KEY?

**API_KEY** - —ç—Ç–æ **–≤–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á** –¥–ª—è –∑–∞—â–∏—Ç—ã API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

### üìã –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- **–ó–∞—â–∏—Ç–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤** –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞** –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π** –≤–∞—à–∏–º API
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** –∫ –¥–∞–Ω–Ω—ã–º –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö

## üîç –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API_KEY?

### –í –∫–æ–¥–µ –±–æ—Ç–∞:
```javascript
// Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API –∫–ª—é—á–∞
const validateApiKey = (req, res, next) => {
    const apiKey = req.headers['x-api-key'];
    const expectedApiKey = process.env.API_KEY || 'hsk_api_key_2024';
    
    if (!apiKey || apiKey !== expectedApiKey) {
        return res.status(401).json({ 
            error: 'Unauthorized', 
            message: 'Valid API key required' 
        });
    }
    
    next();
};
```

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /api/subscription/channels` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤
- `POST /api/subscription/check` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/telegram/send-message` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

### –ù–µ–∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API
- `POST /webhook/telegram` - webhook –¥–ª—è Telegram

## üõ†Ô∏è –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å API_KEY?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–û–Ω–ª–∞–π–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã:**
- [Random.org API Key Generator](https://www.random.org/strings/)
- [UUID Generator](https://www.uuidgenerator.net/)
- [Password Generator](https://passwordsgenerator.net/)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
- –î–ª–∏–Ω–∞: **32-64 —Å–∏–º–≤–æ–ª–∞**
- –°–∏–º–≤–æ–ª—ã: **–±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è**
- –ü—Ä–∏–º–µ—Ä: `hsk_bot_api_key_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

**Windows PowerShell:**
```powershell
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–ª—é—á–∞
$apiKey = "hsk_api_" + [System.Web.Security.Membership]::GeneratePassword(32, 8)
Write-Host "–í–∞—à API –∫–ª—é—á: $apiKey"
```

**Linux/macOS:**
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–ª—é—á–∞
echo "hsk_api_$(openssl rand -hex 16)"

# –ò–ª–∏ —á–µ—Ä–µ–∑ uuidgen
echo "hsk_api_$(uuidgen | tr -d '-' | tr '[:upper:]' '[:lower:]')"
```

**Node.js:**
```javascript
const crypto = require('crypto');
const apiKey = 'hsk_api_' + crypto.randomBytes(16).toString('hex');
console.log('–í–∞—à API –∫–ª—é—á:', apiKey);
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é

**–§–æ—Ä–º–∞—Ç:** `hsk_api_[–≤–∞—à_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_–∫–ª—é—á]`

**–ü—Ä–∏–º–µ—Ä—ã:**
- `hsk_api_my_secret_key_2024`
- `hsk_api_telegram_bot_secure_key`
- `hsk_api_production_key_v1`

**‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ú–∏–Ω–∏–º—É–º **16 —Å–∏–º–≤–æ–ª–æ–≤**
- –¢–æ–ª—å–∫–æ **–ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è**
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–π** –∏ **—Å–ª–æ–∂–Ω—ã–π –¥–ª—è —É–≥–∞–¥—ã–≤–∞–Ω–∏—è**
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –ø—Ä–æ—Å—Ç—ã–µ —Å–ª–æ–≤–∞ –∏–ª–∏ –¥–∞—Ç—ã

## üîê –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å API_KEY –≤ GitHub Secrets?

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** –Ω–∞ GitHub

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - –ù–∞–∂–º–∏—Ç–µ **"Settings"** (–≤ –≤–µ—Ä—Ö–Ω–µ–º –º–µ–Ω—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)

3. **–ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã:**
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é: **"Secrets and variables"** ‚Üí **"Actions"**

4. **–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Å–µ–∫—Ä–µ—Ç:**
   - –ù–∞–∂–º–∏—Ç–µ **"New repository secret"**
   - **Name:** `API_KEY`
   - **Secret:** –≤–∞—à —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á
   - –ù–∞–∂–º–∏—Ç–µ **"Add secret"**

### üì∏ –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞:
```
GitHub Repo ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí New repository secret

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Name: API_KEY                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Secret: hsk_api_your_secret_key_123 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚Üì
              Add secret
```

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ API_KEY —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ü–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ API Gateway:**
   ```bash
   # –ò–∑ –ª–æ–≥–æ–≤ GitHub Actions –∏–ª–∏
   yc serverless api-gateway get hsk-api-gateway --format json | jq -r '.domain'
   ```

2. **–¢–µ—Å—Ç –±–µ–∑ API –∫–ª—é—á–∞ (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É 401):**
   ```bash
   curl https://–≤–∞—à-–¥–æ–º–µ–Ω.apigw.yandexcloud.net/api/subscription/channels
   # –û—Ç–≤–µ—Ç: {"error":"Unauthorized","message":"Valid API key required"}
   ```

3. **–¢–µ—Å—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º API –∫–ª—é—á–æ–º (–¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å):**
   ```bash
   curl -H "x-api-key: –≤–∞—à_api_–∫–ª—é—á" https://–≤–∞—à-–¥–æ–º–µ–Ω.apigw.yandexcloud.net/api/subscription/channels
   # –û—Ç–≤–µ—Ç: {"success":true,"channels":[...]}
   ```

4. **–¢–µ—Å—Ç —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º API –∫–ª—é—á–æ–º (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É 401):**
   ```bash
   curl -H "x-api-key: wrong_key" https://–≤–∞—à-–¥–æ–º–µ–Ω.apigw.yandexcloud.net/api/subscription/channels
   # –û—Ç–≤–µ—Ç: {"error":"Unauthorized","message":"Valid API key required"}
   ```

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚úÖ –ß—Ç–æ –ù–£–ñ–ù–û –¥–µ–ª–∞—Ç—å:
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –∫–ª—é—á–∏** (–º–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤)
- **–•—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á —Ç–æ–ª—å–∫–æ –≤ GitHub Secrets**
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** –∫–ª—é—á –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- **–†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ** –∫–ª—é—á (—Ä–∞–∑ –≤ 3-6 –º–µ—Å—è—Ü–µ–≤)
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

### ‚ùå –ß—Ç–æ –ù–ï –ù–£–ñ–ù–û –¥–µ–ª–∞—Ç—å:
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –ø—Ä–æ—Å—Ç—ã–µ –∫–ª—é—á–∏ —Ç–∏–ø–∞ `123456` –∏–ª–∏ `password`
- **–ù–ï –ø—É–±–ª–∏–∫—É–π—Ç–µ** –∫–ª—é—á –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –∫–æ–¥–µ
- **–ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ** –∫–ª—é—á –ø–æ email –∏–ª–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –æ–¥–∏–Ω –∫–ª—é—á –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- **–ù–ï –ª–æ–≥–∏—Ä—É–π—Ç–µ** –∫–ª—é—á –≤ –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ —Ñ–∞–π–ª—ã

## üîÑ –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å API_KEY?

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å –∫–ª—é—á:

1. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á** (—Å–º. –≤—ã—à–µ)

2. **–û–±–Ω–æ–≤–∏—Ç–µ GitHub Secret:**
   - GitHub ‚Üí Settings ‚Üí Secrets ‚Üí Actions
   - –ù–∞–π–¥–∏—Ç–µ `API_KEY` ‚Üí **"Update"**
   - –í—Å—Ç–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á ‚Üí **"Update secret"**

3. **–ü–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   git commit --allow-empty -m "Update API key"
   git push
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É** —Å –Ω–æ–≤—ã–º –∫–ª—é—á–æ–º

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í JavaScript (frontend):
```javascript
const response = await fetch('https://your-api.apigw.yandexcloud.net/api/subscription/channels', {
    headers: {
        'x-api-key': '–≤–∞—à_api_–∫–ª—é—á',
        'Content-Type': 'application/json'
    }
});
```

### –í Python:
```python
import requests

headers = {
    'x-api-key': '–≤–∞—à_api_–∫–ª—é—á',
    'Content-Type': 'application/json'
}

response = requests.get('https://your-api.apigw.yandexcloud.net/api/subscription/channels', headers=headers)
```

### –í curl:
```bash
curl -H "x-api-key: –≤–∞—à_api_–∫–ª—é—á" \
     -H "Content-Type: application/json" \
     https://your-api.apigw.yandexcloud.net/api/subscription/channels
```

## üìù –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API_KEY

- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª —Å–ª–æ–∂–Ω—ã–π API –∫–ª—é—á (–º–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤)
- [ ] –î–æ–±–∞–≤–∏–ª `API_KEY` –≤ GitHub Secrets
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª API –±–µ–∑ –∫–ª—é—á–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ 401)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª API —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–ª—é—á–æ–º (–¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª API —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–ª—é—á–æ–º (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ 401)
- [ ] –£–±–µ–¥–∏–ª—Å—è, —á—Ç–æ –∫–ª—é—á –Ω–∏–≥–¥–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- [ ] –ó–∞–ø–∏—Å–∞–ª –∫–ª—é—á –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üí° –†–µ–∑—é–º–µ

**API_KEY** - —ç—Ç–æ **–≤–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á**, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ —Å–∞–º–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.

**–ì–ª–∞–≤–Ω–æ–µ:**
1. **–°–æ–∑–¥–∞–π—Ç–µ** —Å–ª–æ–∂–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á
2. **–î–æ–±–∞–≤—å—Ç–µ** –µ–≥–æ –≤ GitHub Secrets –∫–∞–∫ `API_KEY`
3. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ** –∫–ª—é—á –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –∫–æ–¥–µ
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `x-api-key` –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ API

> üîí **–ü–æ–º–Ω–∏—Ç–µ**: API_KEY - —ç—Ç–æ –ù–ï —Ç–æ–∫–µ–Ω –æ—Ç Telegram –∏–ª–∏ Yandex Cloud. –≠—Ç–æ –≤–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª—é—á –¥–ª—è –∑–∞—â–∏—Ç—ã –≤–∞—à–µ–≥–æ API!