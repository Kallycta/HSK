# üîë –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞ Yandex Cloud

**–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–µ–π —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞**

## üéØ –ó–∞—á–µ–º –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω—ã?

–ö–æ–≥–¥–∞ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–æ–≤—ã–µ —Ä–æ–ª–∏ –∫ —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É, **—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–∫–µ–Ω—ã –Ω–µ –ø–æ–ª—É—á–∞—é—Ç –Ω–æ–≤—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**. –¢–æ–∫–µ–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∞–≤–∞—Ö –Ω–∞ –º–æ–º–µ–Ω—Ç –∏—Ö —Å–æ–∑–¥–∞–Ω–∏—è.

## üìã –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å

### 1. GitHub Secrets (–æ—Å–Ω–æ–≤–Ω–æ–µ)

#### `YC_SA_JSON_CREDENTIALS` - JSON –∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

**–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è:**
- GitHub ‚Üí –í–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions
- –°–µ–∫—Ä–µ—Ç —Å –∏–º–µ–Ω–µ–º `YC_SA_JSON_CREDENTIALS`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á** –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞:
   ```bash
   yc iam key create --service-account-name hsk-bot-service-account --output key.json
   ```

2. **–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ [–ö–æ–Ω—Å–æ–ª—å Yandex Cloud](https://console.cloud.yandex.ru/)
   - IAM ‚Üí –°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã ‚Üí –í–∞—à –∞–∫–∫–∞—É–Ω—Ç
   - –í–∫–ª–∞–¥–∫–∞ "–ö–ª—é—á–∏" ‚Üí "–°–æ–∑–¥–∞—Ç—å –∫–ª—é—á" ‚Üí "–°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á"
   - –°–∫–∞—á–∞–π—Ç–µ JSON —Ñ–∞–π–ª

3. **–û–±–Ω–æ–≤–∏—Ç–µ GitHub Secret:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ JSON —Ñ–∞–π–ª–∞
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≤–µ—Å—å JSON** (–≤–∫–ª—é—á–∞—è —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏)
   - –í—Å—Ç–∞–≤—å—Ç–µ –≤ GitHub Secret `YC_SA_JSON_CREDENTIALS`

#### –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ JSON:
```json
{
   "id": "aje...",
   "service_account_id": "aje...",
   "created_at": "2024-01-01T00:00:00Z",
   "key_algorithm": "RSA_2048",
   "public_key": "-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----\n",
   "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
}
```

### 2. –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)

#### –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ —Å Yandex CLI:

**–û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å:**
```bash
# –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ CLI
yc init

# –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å
yc config profile activate default
yc config set service-account-key key.json
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∞
yc iam service-account list-access-bindings <SERVICE_ACCOUNT_ID>

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
yc serverless function list
```

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ CI/CD

#### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥—Ä—É–≥–∏–µ CI/CD —Å–∏—Å—Ç–µ–º—ã:

**GitLab CI/CD:**
- Settings ‚Üí CI/CD ‚Üí Variables
- –û–±–Ω–æ–≤–∏—Ç–µ `YC_SA_JSON_CREDENTIALS`

**Jenkins:**
- Credentials ‚Üí Update credential
- –ó–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–µ–∫—Ä–µ—Ç–∞

**Azure DevOps:**
- Library ‚Üí Variable groups
- –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å –∫–ª—é—á–æ–º

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏** –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö
- **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ** –∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–∞—Ö
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ GitHub Secrets** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è

### ‚è∞ –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–µ–π
- **–ù–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è —Å—Ä–∞–∑—É** –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
- **–°—Ç–∞—Ä—ã–µ —Ç–æ–∫–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç** –¥–æ –∏—Ö —É–¥–∞–ª–µ–Ω–∏—è

### üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:**

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π:**
   ```bash
   # –ß–µ—Ä–µ–∑ GitHub Actions
   git commit --allow-empty -m "Test token update"
   git push
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   yc serverless function list
   yc iam service-account list-access-bindings <SERVICE_ACCOUNT_ID>
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ GitHub Actions:**
   - Actions ‚Üí –ü–æ—Å–ª–µ–¥–Ω–∏–π workflow
   - –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå "Invalid credentials"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç JSON –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π –∫–ª—é—á
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ JSON —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

### ‚ùå "Permission denied" –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
**–ü—Ä–∏—á–∏–Ω–∞:** –†–æ–ª–∏ –µ—â—ë –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å –∏–ª–∏ —Ç–æ–∫–µ–Ω —Å–æ–∑–¥–∞–Ω –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª–µ–π
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 –º–∏–Ω—É—Ç –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á

### ‚ùå "Service account not found"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ –∫–ª—é—á–µ
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç–µ –∫–ª—é—á –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

## üìù –ü–æ—à–∞–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ä–æ–ª–∏ –∫ —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É
- [ ] –ü–æ–¥–æ–∂–¥–∞–ª 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª–µ–π
- [ ] –°–æ–∑–¥–∞–ª –Ω–æ–≤—ã–π JSON –∫–ª—é—á –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- [ ] –û–±–Ω–æ–≤–∏–ª GitHub Secret `YC_SA_JSON_CREDENTIALS`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Ñ–æ—Ä–º–∞—Ç JSON (–≤–∞–ª–∏–¥–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
- [ ] –£–¥–∞–ª–∏–ª —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª —Ç–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –£–±–µ–¥–∏–ª—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á
yc iam key create --service-account-name hsk-bot-service-account --output new-key.json

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–ª–∏ –∞–∫–∫–∞—É–Ω—Ç–∞
yc iam service-account list-access-bindings aje1234567890

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–ª—é—á–µ–π –∞–∫–∫–∞—É–Ω—Ç–∞
yc iam key list --service-account-name hsk-bot-service-account

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–ª—é—á
yc iam key delete <KEY_ID>

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Ç–æ–∫–µ–Ω–∞
yc serverless function list --folder-id <FOLDER_ID>
```

---

> üí° **–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ**: –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–µ–π —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–π JSON –∫–ª—é—á** –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –µ–≥–æ –≤ GitHub Secrets!

> ‚ö†Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ JSON –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ GitHub Secrets –¥–ª—è –∏—Ö —Ö—Ä–∞–Ω–µ–Ω–∏—è.