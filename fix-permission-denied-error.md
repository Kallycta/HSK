# üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ Permission Denied –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Cloud Functions

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–í—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É:
```
ERROR: rpc error: code = PermissionDenied desc = Permission denied
```

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–≥–¥–∞ —É —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Cloud Functions –≤ Yandex Cloud.

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–æ–ª–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å Yandex Cloud**: https://console.cloud.yandex.ru/
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Å–µ—Ä–≤–∏—Å–Ω—ã–º –∞–∫–∫–∞—É–Ω—Ç–∞–º**:
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é: **"–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã"** ‚Üí **"Identity and Access Management"** ‚Üí **"–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã"**
3. **–ù–∞–π–¥–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç** (–æ–±—ã—á–Ω–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `hsk-bot-service-account`)
4. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ** —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É "–†–æ–ª–∏"**

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–æ–ª–∏

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Cloud Functions –Ω—É–∂–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ä–æ–ª–∏:

#### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–æ–ª–∏:
- `serverless.functions.admin` - **–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π**
- `serverless.functions.invoker` - –¥–ª—è –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π
- `iam.serviceAccounts.user` - –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- `resource-manager.clouds.member` - –±–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –∫ –æ–±–ª–∞–∫—É
- `resource-manager.folders.editor` - –¥–æ—Å—Ç—É–ø –∫ –∫–∞—Ç–∞–ª–æ–≥—É

#### üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–æ–ª–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ):
- `logging.writer` - –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤
- `monitoring.editor` - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `api-gateway.websockets.writer` - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ API Gateway

### –®–∞–≥ 3: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª–∏

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ **"–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª–∏"**
2. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å"**
3. –ù–∞–π–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å `serverless.functions.admin`
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π
5. –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ IAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Identity and Access Management"** ‚Üí **"–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª–∏"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"–ö–∞—Ç–∞–ª–æ–≥"** –≥–¥–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. –ù–∞–∂–º–∏—Ç–µ **"–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª–∏"**
4. –í –ø–æ–ª–µ **"–£—á–∞—Å—Ç–Ω–∏–∫–∏"** –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
5. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–æ–ª–∏
6. –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∏–ª–ª–∏–Ω–≥–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±–∏–ª–ª–∏–Ω–≥**: https://console.cloud.yandex.ru/billing
2. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç –∞–∫—Ç–∏–≤–µ–Ω**:
   - –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **"ACTIVE"**
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞
   - –ë–∞–ª–∞–Ω—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º –∏–ª–∏ –µ—Å—Ç—å –≥—Ä–∞–Ω—Ç

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–≤–æ—Ç—ã**: https://console.cloud.yandex.ru/quotas
2. **–ù–∞–π–¥–∏—Ç–µ "Serverless Functions"**
3. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–≤–æ—Ç—ã**:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π
   - –û–±—ä–µ–º –ø–∞–º—è—Ç–∏
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## üîÑ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ GitHub Actions
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

1. **ID –∫–∞—Ç–∞–ª–æ–≥–∞ –≤ secrets**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `YC_FOLDER_ID` –≤ GitHub Secrets –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏: –∫–∞—Ç–∞–ª–æ–≥ ‚Üí –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Üí ID

2. **–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞**:
   - `YC_SA_JSON_CREDENTIALS` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π JSON
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫

3. **–†–µ–≥–∏–æ–Ω –∏ –∑–æ–Ω–∞**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–≥–∏–æ–Ω (–æ–±—ã—á–Ω–æ `ru-central1-a`)

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å YC CLI):

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
yc config list

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–ª–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
yc iam service-account list-access-bindings <SERVICE_ACCOUNT_ID>

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–≤–æ—Ç—ã
yc serverless function list
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ client-request-id** –∏–∑ –æ—à–∏–±–∫–∏ –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
2. **–ü—Ä–∏–ª–æ–∂–∏—Ç–µ trace file**: `/home/runner/.config/yandex-cloud/logs/2025-09-19T08-21-22.705-yc_serverless_function_create.txt`
3. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Yandex Cloud**: https://cloud.yandex.ru/support

---

> üí° **–°–æ–≤–µ—Ç**: –°–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–æ–ª–∏ `serverless.functions.admin`. –î–æ–±–∞–≤—å—Ç–µ –µ—ë –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å!